<html>

<head>
    <meta charset="utf-8">
    <link rel="stylesheet" type="text/css" href="/paul/stylist.css" />
    <title>Artist</title>
</head>

<body>
    {{$api:=.Data}}
    <div class="neonitem">
    <h2>{{(index $api.Artist 0).Name}}</h2>
    </div>
    <img src="{{(index $api.Artist 0).Image}}" alt="{{(index $api.Artist 0).Name}}">
    <p>Membres du groupe :</p>
    <ul>
        {{range(index $api.Artist 0).Members}}
        <li>{{.}}</li>
        {{end}}
    </ul>
    <p>Premier Titre : {{(index $api.Artist 0).CreationDate}}</p>
    <p>Premier Album: {{(index $api.Artist 0).FirstAlbum}}</p>
        <a href="/" class="button">Retour</a>
    <table>
        <tr><br></tr>
        <tr>
            <th>
                <strong>Lieux</strong>
            </th>
            {{range $I,$Loc:= (index $api.Location)}} 
            <th>
                <strong>Date</strong>
            </th>
        </tr>
        
        <tr>
            {{range $I,$Loc:= (index $api.Location)}} 
            {{range index ( index $api.Relation) $Loc}}
            <td>
                {{$Loc}}
              
            </td>
            <td>
                {{.}}
                
            </td>
            {{end}}
            {{end}}
        </tr>
        {{end}}

    </table>
    <form method="POST">
        <select id="select" name="select"> 
        {{range (index $api.Location)}}  
        <option>{{.}}</option>
        {{end}}  
        </select>
        
        <input type="submit" value="send" id="send"><br>
    </form>
    <div style="width: 100%">
        <iframe scrolling="no" marginheight="0" marginwidth="0" id="iframelocation" style="width: 100%; height: 400px">
        </iframe>
        <a href="https://www.maps.ie/route-planner.htm">Google Route Planner</a>
    </div>
    <script>
        a = "The full URL of this page is:<br>" + window.location.href;
        function myFunction() {
            var select = document.getElementById("select");
            res = {{(index $api.Location)}};
        select.innerHTML = res.map(function (option) {
            return "<option>" + option + "</option>";
        }).join("");}
        myFunction()
        window.onload = function () {
            localStorage.setItem("storageName", res);

        }
        document.addEventListener('DOMContentLoaded', () => {
            var location = document.getElementById('select').value;
            console.log(location);
            document.getElementById("iframelocation").setAttribute("src", "https://maps.google.com/maps?q=" + location + "&z=7&output=embed")
            document.getElementById('send').addEventListener('click', function (event) {
                event.preventDefault()
                // Quand je clique, je récupère la valeur dans le select
                var location = document.getElementById('select').value;
                console.log(location);
                document.getElementById("iframelocation").setAttribute("src", "https://maps.google.com/maps?q=" + location + "&z=7&output=embed")
            });
        });
    </script>
    
</body>

</html>