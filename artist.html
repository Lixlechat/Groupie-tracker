<html>

<head>
    <meta charset="utf-8">
    <link rel="stylesheet" type="text/css" href="/paul/style.css" />
    <title>Artist</title>
</head>

<body style="background-color: #f3fdff;">
    <section>
        <a href="/">retour</a>
    </section>

    <h2>{{.Name}}</h2>
    <img src="{{.Image}}" alt="{{.Name}}">
    <p>Members:</p>
    <ul>
        {{range .Members}}
        <li>{{.}}</li>
        {{end}}
    </ul>
    <p>CreationDate: {{.CreationDate}}</p>
    <p>FirstAlbum: {{.FirstAlbum}}</p>
    <table style="width: 30%; border: 1px solid rgb(53, 53, 53);">
        <tr><br></tr>
        <tr>
            <th>
                <strong>Location</strong>
            </th>
            <th>
                <strong>Date</strong>
            </th>
        </tr>
        {{ range $location, $date := .Schedule}}
        <tr>
            <td style="border: 1px solid rgb(53, 53, 53); text-align: center;">
                <span>{{ $location }}</span>
            </td>
            <td style="border: 1px solid rgb(53, 53, 53);">
                <span>{{ $date }}</span>
            </td>
        </tr>
        {{end}}

    </table>

    <form method="POST">
        <select id="select" name="select"></select>
        <input type="submit" value="send" id="send"><br>
    </form>
    <div style="width: 100%">
        <iframe scrolling="no" marginheight="0" marginwidth="0" id="iframelocation" style="width: 100%; height: 400px">
        </iframe>
        <a href="https://www.maps.ie/route-planner.htm">Google Route Planner</a>
    </div>
    <!-- <p id="demo"></p> -->
    <script>
        a = "The full URL of this page is:<br>" + window.location.href;
        function myFunction() {
            var select = document.getElementById("select");
            res = {{.Locations }};
        select.innerHTML = res.map(function (option) {
            return "<option>" + option + "</option>";
        }).join("");
          
          }
        myFunction()
        window.onload = function () {
            localStorage.setItem("storageName", res);

        }
        document.addEventListener('DOMContentLoaded', () => {
            var location = document.getElementById('select').value;
            console.log(location);
            document.getElementById("iframelocation").setAttribute("src", "https://maps.google.com/maps?q=" + location + "&z=7&output=embed")
            document.getElementById('send').addEventListener('click', function (event) {
                event.preventDefault()
                // Quand je clique, je récupère la valeur dans le select
                var location = document.getElementById('select').value;
                console.log(location);
                document.getElementById("iframelocation").setAttribute("src", "https://maps.google.com/maps?q=" + location + "&z=7&output=embed")
            });
        });
    </script>

</body>

</html>